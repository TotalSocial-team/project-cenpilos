{% extends 'cenpilos/mainpage.html' %}

{% block navbar %}
    {% include 'cenpilos/dashboard/components/navbar.html' %}
{% endblock %}

{% load crispy_forms_tags %}

{% block maincontent %}
    <main class="page">
        <section class="clean-block">
            <div class="container-fluid">
                <div class="block-heading">
                    {% if request.user.is_authenticated %}
                        <h1 class="text-primary"><strong>Howdy, {{ request.user.username }}</strong></h1>
                    {% else %}
                        <h1 class="text-primary"><strong>Howdy, Beta Tester</strong></h1>
                    {% endif %}

                </div>
                <div class="block-content">
                    <div class="row">
                        <div class="col">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="text-primary card-title" style="font-size: 39px;">
                                        <strong>{{ version_type }} {{ stage }} {{ type }} {{ number }} Release
                                            Notes</strong></h4>
                                    <p class="card-text">The following features <strong>have been tested </strong>and
                                        has been verified to be working in this release:&nbsp;</p>
                                    <ul>
                                        {% if confirmed != 'None' %}
                                            {% for c in confirmed %}
                                                <li>{{ c }}</li>
                                            {% endfor %}
                                        {% else %}
                                            <li><strong>No new features to report</strong>.</li>
                                        {% endif %}

                                    </ul>
                                    <p class="card-text">The following features are considered as
                                        <strong>EXPERIMENTAL</strong> features and only should be used at your <strong>own
                                            risk</strong>!</p>
                                    <ul>
                                        {% if partial != 'None' %}
                                            {% for part in partial %}
                                                <li>{{ part }}</li>
                                            {% endfor %}
                                        {% else %}
                                            <li><strong>No new features to report</strong>.</li>
                                        {% endif %}
                                    </ul>

                                    <p class="card-text">Upcoming Features...</p>
                                    <ul>
                                        {% if new_features != 'None' %}
                                            {% for ufeatures in new_features %}
                                                <li>{{ ufeatures }}</li>
                                            {% endfor %}
                                        {% else %}
                                            <li><strong>We are not planning anymore features in the next
                                                release</strong>.
                                            </li>
                                        {% endif %}
                                    </ul>


                                    <a class="card-link" href="#">Dismiss</a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="block-content">
                    <div class="row">
                        <div class="col-xl-5">
                            <div class="card">
                                <div class="card-body">
                                    <h2 class="text-info"><strong>BLOCKIT Account Status</strong> <span
                                            class="badge badge-info"> New</span></h2>
                                    {% if protected_status == 0 %}
                                        <p class="text-success card-text" style="font-size: 26px;"><i
                                                class="fas fa-check-circle"></i><span>&nbsp;<strong>Account Protected</strong></span>
                                        </p>
                                    {% endif %}

                                    {% if protected_status == 1 %}
                                        <p class="text-warning card-text" style="font-size: 26px;"><i
                                                class="fas fa-exclamation-circle"></i><span>&nbsp;<strong>Your Account Needs Attention</strong></span>
                                        </p>
                                    {% endif %}

                                    {% if protected_status == 2 %}
                                        <p class="text-danger card-text" style="font-size: 26px;"><i
                                                class="fas fa-times-circle"></i><span>&nbsp;<strong>Account Not Protected</strong></span>
                                        </p>
                                    {% endif %}

                                    <p class="text-{{ colour }} card-text">{{ desc }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-7">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="text-info card-title"><strong>New Post</strong></h4>
                                    <form method="post">
                                        {% csrf_token %}
                                        {{ form |crispy }}

                                        {% if messages %}
                                            {% for message in messages %}
                                                <div class="alert alert-{{ message.tags }}" role="alert">
                                                    {{ message }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}

                                        <div class="form-group">
                                            <button class="btn btn-info" type="submit"><strong>Post</strong></button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <hr>
                            <h1 class="text-info"><strong>Your Feed</strong></h1>
                            <hr>
                            <div class="card">
                                <div class="card-body"><span class="badge badge-info promo">Promotion</span><span
                                        class="promo"></span>
                                    <h4 class="card-title heading-promo"><strong>Your information is yours!</strong>
                                    </h4>
                                    <p class="card-text body-promo">In the world today, Facebook, Twitter and
                                        Snapchat... even Amazon sells your personal information &nbsp;to third parties
                                        of even to the black market.</p>
                                    <p class="card-text body-promo"><strong>Cenpilos </strong>is changing it. Cenpilos
                                        WILL NEVER sell or give your information to third parties.&nbsp;</p>
                                    <button class="btn btn-primary" type="button">Learn more here.</button>
                                    <hr>
                                    <div class="btn-group btn-group-sm" role="group">
                                        <button class="btn btn-info" type="button"><i
                                                class="far fa-thumbs-up"></i><span>Upvote</span></button>
                                        <button class="btn btn-danger" type="button"><i
                                                class="far fa-thumbs-down"></i><span>Downvote</span></button>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            {% if posts %}
                                {% for post in posts %}
                                    <div class="card">
                                        <div class="card-body">
                                            <h4 class="text-primary card-title"><strong>{{ post.author }}</strong></h4>
                                            <h6 class="text-muted card-subtitle mb-2">{{ post.date.date }}</h6>
                                            <p class="card-text">{{ post.content }}</p>
                                            <form action="{% url 'like_post' %}" method="post">
                                                {% csrf_token %}
                                                <div class="btn-group btn-group-sm" role="group">
                                                    <button class="btn btn-info" type="submit" name="post_id"
                                                            value="{{ post.id }}">
                                                        <i class="far fa-thumbs-up"></i><span>Like</span>
                                                    </button>
                                                    <button class="btn btn-danger disabled" type="submit" name="post_id"
                                                            value="{{ post.id }}"><i
                                                            class="far fa-thumbs-down"></i><span>Dislike</span></button>
                                                    <button
                                                            class="btn btn-secondary disabled" type="button"><i
                                                            class="far fa-comment"></i><span>Comment</span></button>
                                                </div>
                                                {% if post.total_likes == 1 %}

                                                <p class="text-info" style="float: right;">{{ post.total_likes }} like</p>
                                                    {% else %}

                                                <p class="text-info" style="float: right;">{{ post.total_likes }} likes</p>

                                                {% endif  %}
                                            </form>

                                            <button class="btn btn-link btn-sm" type="button" style="float: right;"><i
                                                    class="far fa-share-square"></i><span>Share</span></button>
                                            <hr>
                                            <form>
                                                <div class="form-row">
                                                    <div class="col-xl-10">
                                                        <div class="form-group"><textarea
                                                                class="form-control form-control-sm"
                                                                placeholder="Write your comment..."></textarea>
                                                        </div>
                                                    </div>
                                                    <div class="col" style="height: 62px;">
                                                        <button class="btn btn-primary btn-sm" type="submit"
                                                                style="margin-top: 9px;"><i
                                                                class="far fa-paper-plane"></i><span>Post</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <hr>

                                    </div>
                                {% endfor %}
                            {% else %}
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title heading-promo"><strong>You have not made any new
                                            posts.</strong>
                                        </h4>
                                        <p class="card-text body-promo"></p>
                                        Go ahead and make your first post! You can do it.
                                    </div>
                                </div>
                                </div>
                            {% endif %}

                    </div>
                </div>
            </div>
            </div>
        </section>
    </main>
{% endblock %}